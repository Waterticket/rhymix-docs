도메인 변경
-----------

라이믹스는 [멀티도메인](https://github.com/rhymix/rhymix/pull/728)을 지원하므로
도메인을 처리하는 방법이 XE 1.x와 다릅니다.
아래의 순서를 따르면 대부분의 경우 DB나 설정 파일을 직접 수정할 필요가 없습니다.

변경 전 도메인이 from.com, 변경 후 도메인이 to.com이라고 가정합니다.

### 도메인 변경 전

1. from.com으로 접속하여 관리자 화면에서 "시스템 설정" 메뉴에 들어갑니다.
2. "새 도메인 추가"를 클릭하고, to.com을 추가합니다. 모든 설정은 from.com과 동일하게 합니다.
3. "시스템 설정" 화면으로 돌아와서 "등록되지 않은 도메인 처리" 옵션을 "메인 화면 표시"로 변경한 후 저장합니다.
   원래 설정이 "메인 화면 표시"였다면 변경하지 않아도 됩니다.

### 도메인 변경 후

1. to.com으로 접속하여 관리자 화면에서 "시스템 설정" 메뉴에 들어갑니다.
2. to.com 수정 화면으로 들어가서 "기본 도메인"을 선택한 후 저장합니다.
3. from.com을 삭제합니다.
4. "시스템 설정" 화면으로 돌아와서 "등록되지 않은 도메인 처리" 옵션을 원래대로 돌려놓습니다.
   원래 설정이 "메인 화면 표시"였다면 변경하지 않아도 됩니다.

### 도메인 변경 전에 설정을 변경하지 못한 경우

도메인 변경 전에 설정을 미리 바꿔 놓지 않으면 기존 도메인으로 계속 리다이렉트될 수 있습니다.
이 때는 DB에서 아래와 같은 쿼리를 실행하시기 바랍니다.

    UPDATE rx_domains SET domain = 'to.com' WHERE domain = 'from.com';

사용하시는 테이블 접두사(`rx_`)에 따라 적절히 응용하십시오.

쿼리 실행 후에는 `설치폴더/files/cache` 폴더의 모든 하위 폴더를 삭제하여
기존 도메인 정보가 캐시에 남지 않도록 해야 합니다.

### 설정 파일

라이믹스는 XE 1.x와 달리 도메인 변경시 `db.config.php` 또는 `config.php` 파일에서
"기본 URL"을 직접 수정할 필요가 없고, 수정하더라도 의미가 없습니다.
(기본 URL이라는 개념 자체를 사용하지 않습니다. 설정 파일에 남아 있는 URL은
XE 1.x 방식에 의존하는 일부 자료를 위한 호환성을 위한 것이며, 코어에서 참조하지 않습니다.)

단, "등록되지 않은 도메인 처리" 옵션이 잘못되어 기존 도메인으로 계속 리다이렉트되는 경우
`config.php`에서 `unregistered_domain_action` 설정을 `display`로 바꾸어 주면
도움이 될 수 있습니다.